function getPatrocinadores(){$.ajax({data:"",url:"/patrocinadores",type:"post",success:function(e){var o=$("#slider-patrocinadores ul.slides");o.html("");var t=e,a="";for(var s in t)a+=pantrocinadorDinamico(t[s]);o.html(a)},error:function(e){alert("¡Oops! surgio un error: "+e)}})}function pantrocinadorDinamico(e){var o=stringLi().replace("{pathImg}",e.ficha);return o}function stringLi(){var e="<li><img src='{pathImg}' class='img-rounded'></li>";return e}function init(){socket.emit("getNoUsuariosConectadosLobby"),socket.on("sendNoUsuariosConectadosLobby",procesaNoUsuariosConectados),socket.on("sendUsersMesas",procesaUsersMesas),socket.on("redirectToMesa",procesaRedirect),socket.on("redirectToIndex",procesaRedirect),socket.on("buttonBlock",procesaBlockButton),socket.on("buttonDesBlock",procesaDesBlockButton),socket.on("notificacion",procesaNotificacion),socket.on("newMessage",procesaNewMessage)}function procesaNewMessage(e){e_chat.append(itemNewMessage(e)),e_content_chat.animate({scrollTop:e_chat.height()},800);var o={title:e[0]+" dice : ",msg:e[1]};procesaNotificacion(o)}function itemNewMessage(e){0==$(e_chat.selector+" li").length&&e_chat.html("");var o=strinLiChat();return o=o.replace("{nick}",e[0]),o=o.replace("{msg}",e[1])}function strinLiChat(){var e='<li class="left clearfix"><div class="chat-body clearfix"><div class="header"><strong class="primary-font">{nick} dice: </strong></div><p>{msg}</p></div></li>';return e}function procesaUsersMesas(e){var o=0,t=".inner.back";jQuery.each(e,function(e,a){o++;var s=$(t+" #title-"+e),i="";if(null!=a){i=e+" <br/> Época: "+a._epoca,$(t+" #contentData-"+e).html("");var r=new Array;r=a._listaJugadores;for(var n="<ul>",c=0;c<r.length;c++)r[c]._activo&&(n+="<li>",n+=r[c]._nick+" | "+r[c]._creditos,n+="</li>");n+="</ul>";var l='<button type="button" id="btn-join-'+e+'" class="btn btn-default" onclick="joinMesa(\''+e+'\');"><span class="glyphicon glyphicon-hand-up"></span></button>';n+=l,$(t+" #contentData-"+e).append(n)}else{i=e+" | Vacía";var d=stringFormMesa(o);$(t+" #contentData-mesa-"+o).html(d)}s.html(i.toUpperCase())})}function stringFormMesa(e){for(var o='<form id="form-mesa-'+e+'"><div class="form-group"><label for="tiempoTirada">Tiempo</label><select id="tiempoTirada" class="form-control" required="required">',t=5;20>=t;t+=5)o+='<option value="'+t+'">'+t+" Seg.</option>";return o+='</select></div><div class="form-group"><label for="epoca">Época</label><select id="epoca" class="form-control" required="required"><option value="Feudalismo">Feudalismo</option><option value="Capitalismo">Capitalismo</option><option value="Neoliberalismo">Neoliberalismo</option></select></div><button type="button" id="btn-mesa-'+e+'" class="btn btn-default" onclick="selectMesa('+e+');"><span class="glyphicon glyphicon-hand-up"></span></button></form>'}function joinMesa(e){$("#btn-join-"+e).attr("disabled","disabled"),setTimeout(function(){socket.emit("joinMesa",e)},400)}function procesaRedirect(e){window.location.replace(e)}function procesaNoUsuariosConectados(e){$("#noUsuariosConectados").html(""),$("#noUsuariosConectados").append(e)}function defineColor(){for(var e={0:"bg-lisbon",1:"bg-paris",2:"bg-belgrade",3:"bg-moscow",4:"bg-new-delhi",5:"bg-tel-aviv",6:"bg-cairo",7:"bg-san-franciso",8:"bg-tokyo",9:"bg-sydney"},o=new Array,t=0;10>t;){var a=Math.floor(10*Math.random())+0,s=!1;for(j=0;j<o.length;j++)if(o[j]==a){s=!0;break}1!=s&&($("#bg-"+(t+1)).addClass(e[a]),o[t]=a,t++)}}function selectMesa(e){$("#btn-mesa-"+e).attr("disabled","disabled"),setTimeout(function(){socket.emit("blockButton",e);var o="#form-mesa-"+e,t="mesa-"+e,a=$(o+" #epoca").val(),s=$(o+" #tiempoTirada").val(),i=[t,a,s];socket.emit("selectedMesa",i)},400)}function procesaBlockButton(e){$("#btn-mesa-"+e).attr("disabled","disabled")}function procesaDesBlockButton(e){$("#btn-"+e).removeAttr("disabled")}function procesaNotificacion(e){$("#creditos")&&updateCreditos(),"info"==e.tipo?$.growl.notice({title:e.title,message:e.msg}):"danger"==e.tipo?$.growl.error({title:e.title,message:e.msg}):$.growl.warning({title:e.title,message:e.msg})}$("#formContacto").submit(function(e){$("#btnContactar").attr("disabled","disabled");var o=$("#txtMail").val(),t=$("#txtMsg").val();""!=o&&0!=o.length?""!=t&&0!=t.length?$.ajax({data:$(this).serialize(),url:"/contactar",type:"post",success:function(e){if("fail-c"==e.desc)$("#btnContactar").removeAttr("disabled"),$.growl.error({title:"Ups, captcha no valido",message:"Intentelo nuevamente"});else if("fail-v"==e.desc){$("#btnContactar").removeAttr("disabled");for(var o in e.err)$.growl.error({title:"¡Oops!",message:e.err[o].msg})}else"fail-m"==e.desc?(closeModal("#modalContactar"),$.growl.error({title:"¡Oops!",message:"Surgio un problema inesperado, intentalo más tartde"})):(closeModal("#modalContactar"),$.growl.notice({title:"¡Exito!",message:"Tu solicitud ha sido enviada satisfactoriamente"}));$("#txtMail").val(""),$("#txtMsg").val(""),grecaptcha.reset()},error:function(e){console.log("Error: "+e)}}):($("#btnContactar").removeAttr("disabled"),$.growl.error({title:"Ups, mensaje no valido",message:"Ingrese un mensaje valido"})):($("#btnContactar").removeAttr("disabled"),$.growl.error({title:"Ups, email no valido",message:"Ingrese un email valido"})),e.preventDefault()});