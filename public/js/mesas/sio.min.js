function init(e){socket=io.connect(null,{"force new connection":!0}),socket.emit("conectado",e)}function initCustom(){socket=io.connect(),socket.emit("connect10")}function listen(){socket.on("selectFicha",procesaSelectFicha),socket.on("updateListFichas",procesaUpdateListFichas),socket.on("closeModalFicha",procesaCloseModalFicha),socket.on("redirect",procesaRedirect),socket.on("updateJugador",procesaUpdateJugador),socket.on("updateListJugadores",procesaUpdateListJugadores),socket.on("cargaConfiguracion",procesandoCargaConfiguracion),socket.on("notificacion",procesaNotificacion),socket.on("notificacionStartGame",procesaNotificacionStartGame),socket.on("run-time",procesaRunTime),socket.on("timer-decrement",procesaTimerDecrement),socket.on("verificaJugadorExpulsar",procesaVerificaJugadorExpulsar),socket.on("ganadorDefault",procesaGanadorDefault),socket.on("mostrarGanadorDefault",procesaMostrarGanadorDefault),socket.on("timer-decrement-reset",procesaTimerDecrementReset),socket.on("updateCapturaTurnos",procesaUpdateCapturaTurnos),socket.on("updateNoCapturas",procesaUpdateNoCapturas),socket.on("updateFichasUsers",procesaUpdateFichasUsers),socket.on("closeModalReset",procesaCloseModalReset),socket.on("pasarTurno",procesaCambiarTurno),socket.on("pintaFicha",pintarFicha),socket.on("capturaFichas",pintaTablero),socket.on("updatePuntosMesa",procesaUpdateMesa),socket.on("ganador",procesaGanador),socket.on("bloqueaIniciarJuego",bloqueaBoton),socket.on("newMessage",procesaNewMessage),socket.on("redirectTime",procesaRedirectTime),socket.on("checkUpdateJugadorSess",procesaCheckUpdateJugadorSess)}function procesaCloseModalFicha(){closeModal("#modalSelectFichas")}function procesaSelectFicha(e){openModal("#modalSelectFichas"),$("#contenedor-fichas").html(listGroupFichas(e))}function procesaNotificacionStartGame(e){showNotificationStartGame(e)}function procesaUpdateListFichas(e){$("#contenedor-fichas").html(listGroupFichas(e))}function listGroupFichas(e){var a='<div class="col-md-12" style="overflow-y: auto; max-height: 250px;">';for(var o in e)console.log(o),a+='<div class="col-md-3 col-xs-6 text-center"><a id="f-'+o+'" class="clearfix" onclick="defineFicha(\'#f-'+o+"', "+o+');"><img src="'+e[o]._ficha+'" alt="'+e[o]._nombre+'" /><p class="text-info">'+e[o]._nombre+"</p></a></div>";return a+="</div>"}function defineFicha(e,a){setTimeout(function(){socket.emit("definePatrocinador",a,function(e){e||closeModal("#modalSelectFichas")})},400)}function procesaCheckUpdateJugadorSess(e){e._nick==jugador._nick&&(socket.emit("updateSessJugador",e),procesaUpdateJugador(e))}function procesaRedirectTime(e){jugador._nick==e[0]&&setTimeout(function(){socket.emit("expulsaJugador")},5e3)}function procesaNewMessage(e){e_chat.append(itemNewMessage(e)),e_content_chat.animate({scrollTop:e_chat.height()},800);var a={title:e[0].nick+" dice : ",msg:e[1]};procesaNotificacion(a)}function procesaGanador(e){mesa=e.mesa,jugador._nick==e.jugador._nick&&(jugador=e.jugador),verificarGanador(e)}function procesaUpdateMesa(e){mesa._puntosAcumulados=e,e_total_puntos.html(mesa._puntosAcumulados)}function procesaCambiarTurno(e){$(e_jugadores.selector+' .estado[data-jugador="'+e.turnoAnterior+'"]').removeClass("turno"),$(e_jugadores.selector+' .estado[data-jugador="'+e.turnoSiguiente+'"]').addClass("turno")}function procesaCloseModalReset(e){closeModal("#ganador"),e_modal_ajustar_juego.html("")}function procesaUpdateFichasUsers(e){socket.emit("updateFichaUser",e)}function procesaUpdateNoCapturas(e){jugador._noCapturas=e,$(e_total_capturas.selector+" span").html(jugador._noCapturas)}function procesaUpdateCapturaTurnos(){socket.emit("upCaptureTurnoSess")}function procesaTimerDecrementReset(e){e[1]==jugador._nick&&e_timer_reset_game.text(e[0]+"s")}function procesaMostrarGanadorDefault(e){jugador._nick==e.jugador._nick&&(jugador=e.jugador),mesa=e.mesa,verificarGanador(e)}function procesaGanadorDefault(e){mesa=e.mesa,jugador._nick==mesa._listaJugadores[0]._nick&&socket.emit("winDefaultGame",e)}function procesaVerificaJugadorExpulsar(e){jugador._nick==e&&(socket.emit("expulsaJugador"),jugador=null)}function procesaTimerDecrement(e){e_cronometro.html(e[0]),e[1]==jugador._nick?e_cronometro.css("color","#FB0B07"):e_cronometro.css("color","#db6b19")}function procesaRunTime(e){if(mesa=e,jugador._nick==mesa._listaJugadores[mesa._turnoEnMesa]._nick){var a=[mesa._noMesa,jugador._nick];socket.emit("execute-timer",a)}defineStatusJuego(mesa._startGame,mesa._turnoEnMesa)}function procesaNotificacion(e){"info"==e.tipo?$.growl.notice({title:e.title,message:e.msg}):"danger"==e.tipo?$.growl.error({title:e.title,message:e.msg}):$.growl.warning({title:e.title,message:e.msg})}function procesaUpdateJugador(e){jugador=e,e_nombreJugador.html(jugador._nick),e_puntosUsuario.html("$"+jugador._creditos)}function procesaUpdateListJugadores(e){null!=mesa&&(mesa._listaJugadores=e),actualizarUsuarios(e)}function procesandoCargaConfiguracion(e){mesa=e;var a="<img src='../img/mesas/"+mesa._epoca+".png' alt='"+mesa._epoca+"' class='img-responsive center-element'>";e_epoca.html(a),e_cronometro.html(mesa._tiempoTirada),e_total_puntos.html(mesa._puntosAcumulados),crearCasillas(mesa._noCasillas),actualizarUsuarios(mesa._listaJugadores),null!=mesa._tablero&&pintarHistorico(mesa._tablero,mesa._turnoEnMesa),bloqueaBoton(mesa._noJugadoresActivos,mesa._startGame,mesa._bloqueoPorReinicio),"Feudalismo"!=mesa._epoca?(e_total_capturas.removeClass("hidden"),e_total_capturas.addClass("show"),$(e_total_capturas.selector+" span").html(jugador._noCapturas)):(e_total_capturas.removeClass("show"),e_total_capturas.addClass("hidden"))}